<!-- View icons at the top of the events list -->
<div class="events-wrapper">
  {% include view_icons.html %}

{% assign conferences_grouped_by_year = sorted_conferences | group_by_exp:"conference", "conference.date_start | date: '%Y'" %}
{% for conferences_by_year in conferences_grouped_by_year %}
  {% assign conferences_grouped_by_month = conferences_by_year.items | group_by_exp:"conference", "conference.date_start | date: '%m'" %}
  {% for conferences_by_month in conferences_grouped_by_month %}
    <section class="month-section">
      <h2 class="month-title">{{ conferences_by_month.items.first.date_start | date: '%B %Y' }}</h2>
      <div class="conference-list">
        {% for conference in conferences_by_month.items %}  
          <div class="conference-item">
            <div class="date-section">
              <div class="date-badge">
                <span class="day">{{ conference.date_start | date: "%d" }}</span>
                {% if conference.date_start != conference.date_end %}
                  <span class="day-range">-{{ conference.date_end | date: "%d" }}</span>
                {% endif %}
              </div>
            </div>
            
            <!-- Avatar temporalmente oculto
            <div class="event-avatar">
              {% if conference.twitter %}
                {% assign twitter_url = conference.twitter | strip %}
                {% assign twitter_handle = twitter_url | replace: 'http://x.com/', '' | replace: 'https://x.com/', '' | replace: 'http://twitter.com/', '' | replace: 'https://twitter.com/', '' | replace: 'www.x.com/', '' | replace: 'www.twitter.com/', '' | replace: 'x.com/', '' | replace: 'twitter.com/', '' | replace: '@', '' | replace: '/', '' | strip %}
                <img src="https://unavatar.io/{{ twitter_handle }}" 
                     alt="Avatar de {{ conference.name }}" 
                     class="avatar-image"
                     loading="lazy"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="avatar-fallback" style="display: none;">
                  {{ conference.name | slice: 0 | upcase }}
                </div>
              {% else %}
                <div class="avatar-fallback">
                  {{ conference.name | slice: 0 | upcase }}
                </div>
              {% endif %}
            </div>
            -->
            
            <div class="event-info">
              <h3 class="event-name">
                {% if conference.website %}
                  <a href="{{ conference.website }}" target="_blank" rel="noopener">{{ conference.name }}</a>
                {% else %}
                  {{ conference.name }}
                {% endif %}
              </h3>
              {% if conference.location %}
                <span class="event-location">{{ conference.location | remove: ", Spain" }}</span>
              {% endif %}
            </div>
            
            <div class="event-metadata">
              {% if include.type_of_events == 'upcoming' %}
                {% include cfp_data.html %}
                {% include live_data.html %}
              {% endif %}
              {% include cancelled-data.html %}
            </div>
            
            <div class="event-actions">
              {% if conference.website %}
                <a href="{{ conference.website }}" class="share-link" target="_blank" rel="noopener" title="Ver website">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/>
                    <path d="M2 12h20"/>
                  </svg>
                </a>
              {% endif %}
              {% if conference.twitter %}
                <a href="{{ conference.twitter }}" class="twitter-link" target="_blank" rel="noopener" title="Ver en X">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"/>
                  </svg>
                </a>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    </section>
  {% endfor %}
{% endfor %}

</div> <!-- Close events-wrapper -->
